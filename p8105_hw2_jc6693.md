p8105_hw2_jc6693
================
Jingfeng Cao

## Problem 1

``` r
library(tidyverse)
library(readxl)
library(haven)
```

import data pols_month

``` r
pols_month_df = read_csv('fivethirtyeight_datasets/pols-month.csv') |>
  janitor::clean_names() |>
  separate(mon,into = c('year','month','day'),sep = '-') |>
  mutate(year = as.integer(year), month = as.integer(month), day = as.integer(day)) |>
  mutate(month = lubridate::month(month,label = TRUE, abbr = FALSE)) |>
  mutate(president = case_when(prez_dem == 1 ~ 'dem', prez_gop == 1 ~ 'gop')) |>
  select(-prez_dem, -prez_gop, -day)
pols_month_df
```

    ## # A tibble: 822 × 9
    ##     year month     gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##    <int> <ord>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ##  1  1947 January        23      51     253      23      45     198 dem      
    ##  2  1947 February       23      51     253      23      45     198 dem      
    ##  3  1947 March          23      51     253      23      45     198 dem      
    ##  4  1947 April          23      51     253      23      45     198 dem      
    ##  5  1947 May            23      51     253      23      45     198 dem      
    ##  6  1947 June           23      51     253      23      45     198 dem      
    ##  7  1947 July           23      51     253      23      45     198 dem      
    ##  8  1947 August         23      51     253      23      45     198 dem      
    ##  9  1947 September      23      51     253      23      45     198 dem      
    ## 10  1947 October        23      51     253      23      45     198 dem      
    ## # ℹ 812 more rows

import data snp

``` r
snp_df = read_csv('fivethirtyeight_datasets/snp.csv') |>
  janitor::clean_names() |>
  separate(date,into = c('month','day','year'),sep = '/') |>
  mutate(year = as.integer(year), month = as.integer(month), day = as.integer(day)) |>
  mutate(year = case_when(year <= 25 ~ year+2000, year >= 26 ~ year+1900)) |>
  arrange(year,month) |>
  mutate(month = lubridate::month(month,label = TRUE, abbr = FALSE)) |>
  select(year,month, everything(), -day)
snp_df
```

    ## # A tibble: 787 × 3
    ##     year month     close
    ##    <dbl> <ord>     <dbl>
    ##  1  1950 January    17.0
    ##  2  1950 February   17.2
    ##  3  1950 March      17.3
    ##  4  1950 April      18.0
    ##  5  1950 May        18.8
    ##  6  1950 June       17.7
    ##  7  1950 July       17.8
    ##  8  1950 August     18.4
    ##  9  1950 September  19.5
    ## 10  1950 October    19.5
    ## # ℹ 777 more rows

import data unemployment

``` r
unemployment_df = read_csv('fivethirtyeight_datasets/unemployment.csv') |>
  pivot_longer(Jan:Dec,names_to = 'month',values_to = 'unemployment') |>
  mutate(month = month.name[match(month, month.abb)]) |>
  janitor::clean_names() |>
  mutate(year = as.integer(year))
unemployment_df
```

    ## # A tibble: 816 × 3
    ##     year month     unemployment
    ##    <int> <chr>            <dbl>
    ##  1  1948 January            3.4
    ##  2  1948 February           3.8
    ##  3  1948 March              4  
    ##  4  1948 April              3.9
    ##  5  1948 May                3.5
    ##  6  1948 June               3.6
    ##  7  1948 July               3.6
    ##  8  1948 August             3.9
    ##  9  1948 September          3.8
    ## 10  1948 October            3.7
    ## # ℹ 806 more rows

join and brief description

``` r
fivethirtyeight_df = left_join(pols_month_df,snp_df,by = c('year','month')) |>
  left_join(unemployment_df,by = c('year','month'))
fivethirtyeight_df
```

    ## # A tibble: 822 × 11
    ##     year month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##    <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ##  1  1947 January      23      51     253      23      45     198 dem          NA
    ##  2  1947 Februa…      23      51     253      23      45     198 dem          NA
    ##  3  1947 March        23      51     253      23      45     198 dem          NA
    ##  4  1947 April        23      51     253      23      45     198 dem          NA
    ##  5  1947 May          23      51     253      23      45     198 dem          NA
    ##  6  1947 June         23      51     253      23      45     198 dem          NA
    ##  7  1947 July         23      51     253      23      45     198 dem          NA
    ##  8  1947 August       23      51     253      23      45     198 dem          NA
    ##  9  1947 Septem…      23      51     253      23      45     198 dem          NA
    ## 10  1947 October      23      51     253      23      45     198 dem          NA
    ## # ℹ 812 more rows
    ## # ℹ 1 more variable: unemployment <dbl>

the pols_month dataset contains 822 lines and 9 columns related to the
number of national politicians who are democratic or republican. snp
dataset contains contains 787 lines and 3 columns related to the closing
value of Standard & Poor’s stock market index (S&P). the umenployment
dataset contains 816 lines and 3 columns related to the percentage of
unemployment.  
After merging, the result dataset contains 822 lines and 11 columns. the
year ranges from 1947 to 2015, with some missing data of unemployment in
1947 and snp in 1947 to 1949. the key variables are year and month
showing time; govgop:president(total 7 variables) showing the
politicians; snp showing the stock’s values; unemployment showing the
unemployment rate.

## Problem 2

import clean the Mr. Trash Wheel sheet

``` r
mr_trash_wheel_df = read_excel('202509 Trash Wheel Collection Data.xlsx', sheet = 1, skip = 1) |>
  select(-...15,-...16) |>
  janitor::clean_names() |>
  head(-1) |>
  drop_na() |>
  mutate(sports_balls = as.integer(round(sports_balls)))
mr_trash_wheel_df
```

    ## # A tibble: 629 × 14
    ##    dumpster month year  date                weight_tons volume_cubic_yards
    ##       <dbl> <chr> <chr> <dttm>                    <dbl>              <dbl>
    ##  1        1 May   2014  2014-05-16 00:00:00        4.31                 18
    ##  2        2 May   2014  2014-05-16 00:00:00        2.74                 13
    ##  3        3 May   2014  2014-05-16 00:00:00        3.45                 15
    ##  4        4 May   2014  2014-05-17 00:00:00        3.1                  15
    ##  5        5 May   2014  2014-05-17 00:00:00        4.06                 18
    ##  6        6 May   2014  2014-05-20 00:00:00        2.71                 13
    ##  7        7 May   2014  2014-05-21 00:00:00        1.91                  8
    ##  8        8 May   2014  2014-05-28 00:00:00        3.7                  16
    ##  9        9 June  2014  2014-06-05 00:00:00        2.52                 14
    ## 10       10 June  2014  2014-06-11 00:00:00        3.76                 18
    ## # ℹ 619 more rows
    ## # ℹ 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <int>, homes_powered <dbl>

import Professor Trash Wheel and Gwynnda data:

``` r
professor_df = read_excel('202509 Trash Wheel Collection Data.xlsx', sheet = 2, skip = 1) |>
  janitor::clean_names() |>
  drop_na()
professor_df
```

    ## # A tibble: 117 × 13
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ##  1        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ##  2        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ##  3        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ##  4        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ##  5        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ##  6        6 March     2017 2017-03-30 00:00:00        1.71                 15
    ##  7        7 April     2017 2017-04-01 00:00:00        1.82                 15
    ##  8        8 April     2017 2017-04-20 00:00:00        2.37                 15
    ##  9        9 May       2017 2017-05-10 00:00:00        2.64                 15
    ## 10       10 May       2017 2017-05-26 00:00:00        2.78                 15
    ## # ℹ 107 more rows
    ## # ℹ 7 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, homes_powered <dbl>

``` r
gwynnda_df = read_excel('202509 Trash Wheel Collection Data.xlsx', sheet = 4, skip = 1) |>
  janitor::clean_names() |>
  drop_na()
gwynnda_df
```

    ## # A tibble: 192 × 12
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <dbl> <dttm>                    <dbl>              <dbl>
    ##  1      117 November  2022 2022-11-03 00:00:00        3.06                 15
    ##  2      118 November  2022 2022-11-15 00:00:00        3                    15
    ##  3      119 November  2022 2022-11-19 00:00:00        2.42                 15
    ##  4      120 November  2022 2022-11-22 00:00:00        2.37                 15
    ##  5      121 November  2022 2022-11-30 00:00:00        2.91                 15
    ##  6      122 December  2022 2022-12-13 00:00:00        2.35                 14
    ##  7      123 December  2022 2022-12-17 00:00:00        2.8                  15
    ##  8      124 December  2022 2022-12-17 00:00:00        2.69                 15
    ##  9      125 December  2022 2022-12-19 00:00:00        2.27                 15
    ## 10      126 December  2022 2022-12-19 00:00:00        2.5                  15
    ## # ℹ 182 more rows
    ## # ℹ 6 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>

join them:

``` r
mr_trash_wheel_df = mutate(mr_trash_wheel_df, type = 'mr', year = as.integer(year))
professor_df = mutate(professor_df, type = 'professor', year = as.integer(year))
gwynnda_df = mutate(gwynnda_df, type = 'gwynnda', year = as.integer(year))
merge_df = bind_rows(mr_trash_wheel_df,professor_df,gwynnda_df) |>
  arrange(dumpster)
merge_df
```

    ## # A tibble: 938 × 15
    ##    dumpster month     year date                weight_tons volume_cubic_yards
    ##       <dbl> <chr>    <int> <dttm>                    <dbl>              <dbl>
    ##  1        1 May       2014 2014-05-16 00:00:00        4.31                 18
    ##  2        1 January   2017 2017-01-02 00:00:00        1.79                 15
    ##  3        2 May       2014 2014-05-16 00:00:00        2.74                 13
    ##  4        2 January   2017 2017-01-30 00:00:00        1.58                 15
    ##  5        3 May       2014 2014-05-16 00:00:00        3.45                 15
    ##  6        3 February  2017 2017-02-26 00:00:00        2.32                 18
    ##  7        4 May       2014 2014-05-17 00:00:00        3.1                  15
    ##  8        4 February  2017 2017-02-26 00:00:00        3.72                 15
    ##  9        5 May       2014 2014-05-17 00:00:00        4.06                 18
    ## 10        5 February  2017 2017-02-28 00:00:00        1.45                 15
    ## # ℹ 928 more rows
    ## # ℹ 9 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <int>, homes_powered <dbl>, type <chr>
